-- Autogenerated by migration tool on 2022-02-15 17:45:37
-- CHANGEME: Verify or edit this file before proceeding

-- Resource: eventhub.namespaces
CREATE TABLE IF NOT EXISTS "azure_eventhub_namespaces" (
	"cq_id" uuid NOT NULL,
	"cq_meta" jsonb,
	"cq_fetch_date" timestamp without time zone NOT NULL,
	"subscription_id" text,
	"sku_name" text,
	"sku_tier" text,
	"sku_capacity" integer,
	"identity_principal_id" text,
	"identity_tenant_id" text,
	"identity_type" text,
	"provisioning_state" text,
	"created_at_time" timestamp without time zone,
	"updated_at_time" timestamp without time zone,
	"service_bus_endpoint" text,
	"cluster_arm_id" text,
	"metric_id" text,
	"is_auto_inflate_enabled" boolean,
	"maximum_throughput_units" integer,
	"kafka_enabled" boolean,
	"zone_redundant" boolean,
	"encryption_key_source" text,
	"location" text,
	"tags" jsonb,
	"id" text,
	"name" text,
	"type" text,
	CONSTRAINT azure_eventhub_namespaces_pk PRIMARY KEY(cq_fetch_date,subscription_id,id),
	UNIQUE(cq_fetch_date,cq_id)
);
SELECT setup_tsdb_parent('azure_eventhub_namespaces');
CREATE TABLE IF NOT EXISTS "azure_eventhub_namespace_encryption_key_vault_properties" (
	"cq_id" uuid NOT NULL,
	"cq_meta" jsonb,
	"cq_fetch_date" timestamp without time zone NOT NULL,
	"namespace_cq_id" uuid,
	"key_name" text,
	"key_vault_uri" text,
	"key_version" text,
	CONSTRAINT azure_eventhub_namespace_encryption_key_vault_properties_pk PRIMARY KEY(cq_fetch_date,cq_id),
	UNIQUE(cq_fetch_date,cq_id)
);
CREATE INDEX ON azure_eventhub_namespace_encryption_key_vault_properties (cq_fetch_date, namespace_cq_id);
SELECT setup_tsdb_child('azure_eventhub_namespace_encryption_key_vault_properties', 'namespace_cq_id', 'azure_eventhub_namespaces', 'cq_id');
